<!DOCTYPE HTML>

<html>
    <head>
        <script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "/"
        },
        "articleSection" : "",
        "name" : "Ryan&#39;s Blog",
        "headline" : "Ryan&#39;s Blog",
        "description" : "",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2018",
        "datePublished": "2018-08-04 10:49:52 -0500 CDT",
        "dateModified" : "2018-08-04 10:49:52 -0500 CDT",
        "url" : "/",
        "wordCount" : "0",
        "keywords" : [ "Blog" ]
    }
    </script>
        
            
                <title>Ryan&#39;s Blog</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.46" />
        


        
        
            
                <meta name="description" content="The blog of a Cloud Engineer and hobbyist">
            
        

        <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Ryan&#39;s Blog"/>
<meta name="twitter:description" content="The blog of a Cloud Engineer and hobbyist"/>

        <meta property="og:title" content="Ryan&#39;s Blog" />
<meta property="og:description" content="The blog of a Cloud Engineer and hobbyist" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/" />



<meta property="og:updated_time" content="2018-08-04T10:49:52-05:00"/>










        <meta property="og:image" content="//images/logo.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="512">
        <meta property="og:image:height" content="512">
        
<meta itemprop="name" content="Ryan&#39;s Blog">
<meta itemprop="description" content="The blog of a Cloud Engineer and hobbyist">


        

        
            
        

        
        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css">
            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/add-on.css">
            <link rel="stylesheet" href="/css/academicons.min.css">
        

        
            
                
            
        


  
    
    <link href='//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />
  


      
    </head>
    <body>

      
      <div id="wrapper">

    
    
<header id="header">
    
      <h1><a href="/">Home</a></h1>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/">
                            <i class="fa fa-home">&nbsp;</i>Home
                    </a>
                </li>
            
                <li>
                    <a href="/blog/">
                            <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                    </a>
                </li>
            
                <li>
                    <a href="/categories/">
                            <i class="fa fa-sitemap">&nbsp;</i>Categories
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="as_sitesearch" value="/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="as_sitesearch" value="/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/">
                            <h3>
                                <i class="fa fa-home">&nbsp;</i>Home
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/blog/">
                            <h3>
                                <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories/">
                            <h3>
                                <i class="fa fa-sitemap">&nbsp;</i>Categories
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section class="recent-posts">
            <div class="mini-posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                

                
                    
                

                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/blog/my-homelab-and-why-it-cost-way-too-much/">My homelab and why it cost way too much</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-08-04'>
                                    August 4, 2018</time>
                            </header>
                            
    

    
        
        







  


        
        
        

        <a href="/blog/my-homelab-and-why-it-cost-way-too-much/" class="image featured">
            <img src="/img/2018/08/switches.jpg" alt="">
        </a>
    


                        </article>
                

                
            </div>
        </section>

    
        
</section>

    
    <div id="main">
        
            <article class="post">
  <header>
    <div class="title">
        
            <h2><a href="/blog/my-homelab-and-why-it-cost-way-too-much/">My homelab and why it cost way too much</a></h2>
        
        
    </div>
    <div class="meta">
        

        <time class="published"
            datetime='2018-08-04'>
            August 4, 2018</time>
        <span class="author">Ryan Belgrave</span>
        
            <p>5 minute read</p>
        
        
    </div>
</header>


  

  
    

    
        
        







  


        
        
        

        <a href="/blog/my-homelab-and-why-it-cost-way-too-much/" class="image featured">
            <img src="/img/2018/08/switches.jpg" alt="">
        </a>
    


  <div id="content">
    

<h2 id="introduction">Introduction</h2>

<p>Welcome to my blog! I finally got around to actually writing something. Who knew it could be hard to find a decent theme. Anyway I am going to do my best at putting out two posts a month (maybe more) going over various tech related things I am doing. Some of them will come in the form of a series while others will be one offs. There are no garentees on the amount of conent in each post, some might just end up being code snippets for fixing bugs while others might be more in-depth. Alright here we go!</p>

<h2 id="why-i-have-a-homelab">Why I have a homelab</h2>

<p>Well I mean why not? Having &ldquo;free&rdquo; hardware laying around online <sup>24</sup>&frasl;<sub>7</sub> is great for developing and testing projects that I typically would have to pay Digital Ocean, AWS, or Google Cloud for. Of course there is the electric cost, it can be more expensive when the hardware is sitting doing nothing, but if you are not convinced just head over to <a href="https://www.reddit.com/r/homelab/">r/homelab</a> and they will suck you right in.</p>

<h3 id="hardware">Hardware</h3>

<h4 id="network">Network</h4>

<ul>
<li>ARRIS SURFboard SB6183 DOCSIS 3.0 Cable Modem</li>
<li>PFSense Netgate-2220</li>
<li>Ubiquiti Unifi Cloud Controller</li>
<li>Ubiquiti Unifi PoE+ 1Gbps 24 Port Switch</li>
<li>Ubiquiti Unifi 10Gbps SFP+ 16 Port Switch - not used at the time of writing</li>
</ul>

<h4 id="compute">Compute</h4>

<p>To seasoned homelabbers the compute hardware listed bellow is going to look horrible, and yes I know it was a horrible choice. Don&rsquo;t worry I cover all the issues later in the post.</p>

<h5 id="server-1">Server 1</h5>

<p>This computer was my old daily driver with a few parts changed and taken out. I didn&rsquo;t have any other use for it so why not put it to work.</p>

<ul>
<li>Intel i7-4770k</li>
<li>32 GB DDR3 Ram</li>
<li>40 GB SSD</li>
<li>500 GB WD Black HDD</li>
<li>2 Broadwell 1 Port NIC PCI-E cards</li>
</ul>

<h5 id="server-2">Server 2</h5>

<ul>
<li>Intel i7-5820k</li>
<li>64 GB DDR4 Ram</li>
<li>128 GB NVME SSD</li>
<li>1 TB WD Black HDD</li>
<li>Intel I350T4V2 4 Port NIC</li>
</ul>

<h5 id="server-3">Server 3</h5>

<ul>
<li>Intel i7-6900k</li>
<li>128 GB DDR4 Ram</li>
<li>128 GB NVME SSD</li>
<li>1 TB WD Black HDD</li>
<li>Intel I350T4V2 4 Port NIC</li>
</ul>

<h3 id="software">Software</h3>

<ul>
<li>VMWare vCenter + ESXI on every host</li>
<li>Sandwich Cloud

<ul>
<li>A cloud-like api and control system for virtual machines running in vCenter</li>
<li><a href="https://github.com/sandwichcloud">https://github.com/sandwichcloud</a></li>
</ul></li>
</ul>

<h2 id="regrets-and-why-new-isn-t-always-the-best">Regrets and why new isn&rsquo;t always the best</h2>

<p>Let me start out with <strong>do not buy consumer hardware</strong>.</p>

<p>When I started building my homelab I didn&rsquo;t do any research on what a homelab should consist of and what hardware to look for. I initially searched ebay for cheap server hardware and found 3 servers for what seemed to be a great deal. However as I found out, after about 20% load it was impossible to be in the same room with them due to noise. They were also very old and relatively slow compaired to modern consumer hardware.</p>

<p>I took my knowledge of building gaming computers and built not one but eventually two &ldquo;servers&rdquo;. I found the best and most expensive consumer enthusiest hardware and slapped it into a slient mid tower ATX case and called that good. It turned out to be a waste of money and I apparently didn&rsquo;t learn and did that twice&hellip;</p>

<p>Consumer hardware, even if it is old it is not good for a homelab, it is <strong>way overpriced</strong> and way under performant. For around the same amount of money I could have very easily peiced together slightly older Intel Ivy Bridge systems using used Xeon and Supermicro parts with tripple the number of physical cores and ram.</p>

<p>Building servers however is not always the best idea, unlike consumer gear it can be more expensive, buying a used Dell R710/720 from ebay is usually better in most situations. Yet, I will continue to build my own servers. Why? Mostly for noise reasons, pre-built rack mount servers (and some tower variants) can be pretty loud when under load and modding in custom fans can be difficult. I do also enjoy searching for the various parts online and building it all when they get delivered.</p>

<p>I guess this turns into one of those &ldquo;do what I say not what I do&rdquo; type of things.</p>

<h2 id="future-expansion">Future Expansion</h2>

<p>Having compute hardware is great but not having shared storage is a pain. When I need to take a host down for maintance I need to wait for storage vMotion to move everything. I also run a few kubernetes clusters and they need to be isolated on each node due to wanting to use persistent disk.</p>

<p>I have a few options, but I have decided to build a FreeNAS storage server instead of relying on VMWare VSAN.</p>

<p>VSAN is great however due to having consumer hardware with no ECC memory, no room for pci expansion for raid cards, cases that aren&rsquo;t made for mass storage, and only 3 compute nodes, it isn&rsquo;t worth it trying to fix everything to ensure data reliability.</p>

<p>Due to wanting to use my homelab as a &ldquo;mini cloud&rdquo; I don&rsquo;t want to deal with any storage bottlenecks, this is where the 10Gbps switch comes into play. It probably will be way overkill but the storage server will have a few Intel Optane SSD as caches which have been shown to saturate a 10Gbps link. I am still a few months away from building the storage server though and some of the hardware decisions may change. I will be making a blog post once I do get the hardware so stay tuned for that!</p>

  </div>

  <footer>
    <ul class="stats">
  <li class="categories">
    <ul>
        
            
            
                <i class="fa fa-folder"></i>
                
                
                <li><a class="article-category-link" href="/categories/lab">lab</a></li>
                
                
                <li><a class="article-category-link" href="/categories/vmware">vmware</a></li>
                
                
                <li><a class="article-category-link" href="/categories/hardware">hardware</a></li>
                
            
        
    </ul>
  </li>
  <li class="tags">
    <ul>
        
    </ul>
  </li>
</ul>

  </footer>

</article>
<script src="https://utteranc.es/client.js"
        repo="rmb938/rmb938.github.io"
        issue-term="title"
        crossorigin="anonymous"
        async>
</script>
<ul class="actions pagination">
    

    
</ul>



            <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            



<li>
  <a href="//twitter.com/share?url=%2fblog%2fmy-homelab-and-why-it-cost-way-too-much%2f&amp;text=My%20homelab%20and%20why%20it%20cost%20way%20too%20much&amp;via=" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
    </a>
</li>




<li>
  <a href="//plus.google.com/share?url=%2fblog%2fmy-homelab-and-why-it-cost-way-too-much%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
  </a>
</li>





<li>
  <a href="//www.facebook.com/sharer/sharer.php?u=%2fblog%2fmy-homelab-and-why-it-cost-way-too-much%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
    </a>
</li>




<li>
  <a href="//reddit.com/submit?url=%2fblog%2fmy-homelab-and-why-it-cost-way-too-much%2f&amp;title=My%20homelab%20and%20why%20it%20cost%20way%20too%20much" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
  </a>
</li>




<li>
  <a href="//www.linkedin.com/shareArticle?url=%2fblog%2fmy-homelab-and-why-it-cost-way-too-much%2f&amp;title=My%20homelab%20and%20why%20it%20cost%20way%20too%20much" target="_blank" class="share-btn linkedin">
      <i class="fa fa-linkedin"></i>
      <p>LinkedIn</p>
    </a>
</li>




<li>
  <a href="//www.stumbleupon.com/submit?url=%2fblog%2fmy-homelab-and-why-it-cost-way-too-much%2f&amp;title=My%20homelab%20and%20why%20it%20cost%20way%20too%20much" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
  </a>
</li>




<li>
  <a href="//www.pinterest.com/pin/create/button/?url=%2fblog%2fmy-homelab-and-why-it-cost-way-too-much%2f&amp;description=My%20homelab%20and%20why%20it%20cost%20way%20too%20much" target="_blank" class="share-btn pinterest">
    <i class="fa fa-pinterest-p"></i>
    <p>Pinterest</p>
  </a>
</li>




<li>
  <a href="mailto:?subject=Check out this post by Ryan%20Belgrave&amp;body=%2fblog%2fmy-homelab-and-why-it-cost-way-too-much%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
  </a>
</li>


        </ul>
    </section>
</section>

        
    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
    
      <header>
        <h2>Ryan&#39;s Blog</h2>
        <p>The blog of a Cloud Engineer and hobbyist</p>
      </header>
    
    
  </section>

  
  <section class="recent-posts">
    <div class="mini-posts">
      <header>
        <h3>Recent Posts</h3>
      </header>
      <div class="posts-container">
        

        
          
        

        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/blog/my-homelab-and-why-it-cost-way-too-much/">My homelab and why it cost way too much</a>
              </h3>
              
              <time class="published" datetime='2018-08-04'>
                August 4, 2018
              </time>
            </header>
            
    

    
        
        







  


        
        
        

        <a href="/blog/my-homelab-and-why-it-cost-way-too-much/" class="image featured">
            <img src="/img/2018/08/switches.jpg" alt="">
        </a>
    


          </article>
        
      </div>

      
    </div>
  </section>

  
  
  

  
  

  
  <section id="footer">
    
      <ul class="icons">
        
          
    <li><a href="/index.xml" type="application/rss+xml" target="_blank" title="RSS" class="fa fa-rss"></a></li>


        
        
  <li><a href="//github.com/rmb938" target="_blank" title="GitHub" class="fa fa-github"></a></li>



  <li><a href="//gitlab.com/rmb938" target="_blank" title="GitLab" class="fa fa-gitlab"></a></li>























  <li><a href="//linkedin.com/in/rbelgrave" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>






















































      </ul>
    
    <p class="copyright">
      
        &copy; 2018
        
          Ryan&#39;s Blog
        
      .
      Powered by <a href="//gohugo.io" target="_blank">Hugo</a>
    </p>
  </section>
</section>

    </div>
    <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
    

    
      
    

    
      
      
      
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>
        
        
        
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/css.min.js"></script>
        <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
      
    
    
    
      <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script>
      <script src="/js/util.js"></script>
      <script src="/js/main.js"></script>
      <script src="/js/backToTop.js"></script>
    

    
      
        
      
    

    
    <script>hljs.initHighlightingOnLoad();</script>
      <script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


  </body>
</html>

